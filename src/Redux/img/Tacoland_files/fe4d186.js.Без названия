(window.webpackJsonp=window.webpackJsonp||[]).push([[1,14,18],{297:function(t,e,r){},298:function(t,e,r){},305:function(t,e,r){"use strict";r.r(e);r(20),r(4),r(13),r(14),r(21),r(22),r(23);var n=r(1),o=(r(9),r(353)),c=r(322),d=r(100),l=r(357),v=r(105);function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){d=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw o}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var h={components:{ProductDetail:o.default,AddressModal:d.default,Conditions:l.default,LoadingCircle:v.default,ProductAdd:c.default},data:function(){return{lastId:0,categoriesOffsets:[]}},beforeMount:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.commit("cart/initialiseStore");case 2:return t.$route.query.bowl&&t.$cookies.set("bowl","bowl",{path:"/",maxAge:86400}),e.next=5,t.$store.dispatch("menu/reload",t);case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initOffsets(),window.scrollTo({top:0,behavior:"smooth"}),window.addEventListener("scroll",t.handleScroll),window.addEventListener("resize",t.onResize);case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.onResize)},updated:function(){this.initOffsets(!1)},methods:{initOffsets:function(t){if((t||0===this.categoriesOffsets.length)&&this.$refs.categories){var e,r=[],n=f(this.$refs.categories);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push({id:o.getAttribute("data-id"),offset:window.pageYOffset+o.getBoundingClientRect().top})}}catch(t){n.e(t)}finally{n.f()}this.categoriesOffsets=r,0==this.selectedCategory&&this.$store.commit("menu/setSelectedCategory",this.categoriesOffsets[0].id)}},onResize:function(){this.initOffsets(!0)},handleScroll:function(){if(!(Date.now()-this.lockScroll<1e3)){this.initOffsets();var t,e=0,r=f(this.categoriesOffsets);try{for(r.s();!(t=r.n()).done;){var n=t.value;window.pageYOffset+250>n.offset&&(e=n.id)}}catch(t){r.e(t)}finally{r.f()}e>0&&this.lastId!==e&&(this.$store.commit("menu/setSelectedCategory",e),this.lastId=e)}},categorySelected:function(t){this.initOffsets();var e,r=f(this.categoriesOffsets);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.id==this.selectedCategory)return void window.scrollTo({top:n.offset-70,behavior:"smooth"})}}catch(t){r.e(t)}finally{r.f()}},removeProduct:function(t){if(t.isComplex){var e,r=0,n=f(this.cartProducts);try{for(n.s();!(e=n.n()).done;){e.value.id===t.id&&r++}}catch(t){n.e(t)}finally{n.f()}1===r?this.$store.dispatch("cart/changeProduct",{product:{id:t.id},change:-1}):this.$emit("openCart")}else this.$store.dispatch("cart/changeProduct",{product:{id:t.id},change:-1})},addProduct:function(t){this.addressSelected?t.isComplex?this.$refs.ProductAdd.show(t):this.$store.dispatch("cart/addProduct",{product:{id:t.id},count:1}):this.$refs.AddressModal.show()},getProductCount:function(t){var e,r=0,n=f(this.cartProducts);try{for(n.s();!(e=n.n()).done;){var p=e.value;p.id===t&&(r+=p.count)}}catch(t){n.e(t)}finally{n.f()}return r},openDetails:function(t){this.$refs.productDetail.show(t)},openAddressModal:function(t){this.$refs.AddressModal.show()},selectCategory:function(t){this.$store.commit("menu/lockScroll"),this.$store.commit("menu/setSelectedCategory",t),this.$store.commit("menu/categoryUpdated",t)}},computed:{menu:function(){return this.$store.getters["menu/menu"]},address:function(){return this.$store.getters["cart/address"].value},cart:function(){return this.$store.getters["cart/cart"]},cartProducts:function(){return this.$store.getters["cart/products"]},lockScroll:function(){return this.$store.getters["menu/lockScroll"]},selectedCategory:function(){return this.$store.getters["menu/selectedCategory"]},categoryUpdated:function(){return this.$store.getters["menu/categoryUpdated"]},addressSelected:function(){return!!this.$store.getters["cart/address"].value}},watch:{categoryUpdated:function(t,e){t&&this.categorySelected(t)},address:function(){this.$store.dispatch("menu/reload",this)},menu:function(){var t=this;setTimeout((function(){t.initOffsets(!0)}),300)}}},m=(r(373),r(3)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"menu"},[r("div",{staticClass:"left_menu"},[r("div",{staticClass:"categories_wrap"},[r("div",{staticClass:"menu_head"},[t._v("Меню")]),t._v(" "),t._l(t.menu.categories,(function(e){return r("div",{key:e.id,staticClass:"left_menu_category",class:{active:e.id==t.selectedCategory},on:{click:function(r){return t.selectCategory(e.id)}}},[r("div",{staticClass:"name"},[t._v("\n          "+t._s(e.name)+"\n        ")])])}))],2)]),t._v(" "),r("div",{staticClass:"menu_categories"},[t.menu.conditions?[r("div",{staticClass:"address_warning"},[t.addressSelected?t._e():r("div",{staticClass:"text",on:{click:function(e){return t.openAddressModal()}}},[t._v("Укажите ваш адрес для отображения меню и условий доставки для вашего района\n        ")])]),t._v(" "),t.addressSelected?[r("Conditions",{attrs:{conditions:t.menu.conditions}})]:t._e()]:t._e(),t._v(" "),0===t.menu.categories.length?[r("div",{staticClass:"loading"},[r("LoadingCircle")],1)]:t._e(),t._v(" "),t._l(t.menu.categories,(function(e){return r("div",{key:e.id,ref:"categories",refInFor:!0,staticClass:"products_content",attrs:{"data-id":e.id}},[0===e.categories.length?[r("div",{staticClass:"category_header"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"products"},t._l(e.products,(function(p){return r("div",{key:p.id,staticClass:"product_item_wrap"},[r("div",{staticClass:"product_item"},[r("div",{staticClass:"product_content"},[r("div",{staticClass:"product_img_container"},[r("img",{staticClass:"product_img",attrs:{src:p.image,alt:""},on:{click:function(e){return t.openDetails(p)}}})]),t._v(" "),r("div",{staticClass:"product_name",on:{click:function(e){return t.openDetails(p)}}},[r("div",{staticClass:"name"},[t._v(t._s(p.name))]),t._v(" "),p.weight?r("div",{staticClass:"weight"},[t._v(t._s(p.weight)+" "+t._s(p.measure_unit))]):t._e()]),t._v(" "),r("div",{staticClass:"product_bottom"},[r("div",{staticClass:"product_price"},[t._v(t._s(p.price)+" ₽")]),t._v(" "),r("div",{staticClass:"product_change"},[t.getProductCount(p.id)<=0?[r("div",{staticClass:"minus_hide"}),t._v(" "),r("span",{staticClass:"count"}),t._v(" "),r("a",{staticClass:"plus",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addProduct(p)}}},[t._v("+")])]:[r("a",{staticClass:"minus grey",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeProduct(p)}}},[t._v("-")]),t._v(" "),r("span",{staticClass:"count"},[t._v(t._s(t.getProductCount(p.id)))]),t._v(" "),r("a",{staticClass:"plus grey",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addProduct(p)}}},[t._v("+")])]],2)]),t._v(" "),p.description?r("div",{staticClass:"product_description",on:{click:function(e){return t.openDetails(p)}}},[t._v("\n                  "+t._s(p.description)+"\n                ")]):t._e()])])])})),0)]:t._l(e.categories,(function(e){return r("div",{key:e.id},[r("div",{staticClass:"category_header"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"products"},t._l(e.products,(function(p){return r("div",{key:p.id,staticClass:"product_item_wrap"},[r("div",{staticClass:"product_item"},[r("div",{staticClass:"product_content"},[r("div",{staticClass:"product_img_container"},[r("img",{staticClass:"product_img",attrs:{src:p.image,alt:""},on:{click:function(e){return t.openDetails(p)}}})]),t._v(" "),r("div",{staticClass:"product_name",on:{click:function(e){return t.openDetails(p)}}},[r("div",{staticClass:"name"},[t._v(t._s(p.name))]),t._v(" "),p.weight?r("div",{staticClass:"weight"},[t._v(t._s(p.weight)+" "+t._s(p.measure_unit))]):t._e()]),t._v(" "),r("div",{staticClass:"product_bottom"},[r("div",{staticClass:"product_price"},[t._v(t._s(p.price)+" ₽")]),t._v(" "),r("div",{staticClass:"product_change"},[t.getProductCount(p.id)<=0?[r("div",{staticClass:"minus_hide"}),t._v(" "),r("span",{staticClass:"count"}),t._v(" "),r("a",{staticClass:"plus",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addProduct(p)}}},[t._v("+")])]:[r("a",{staticClass:"minus grey",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeProduct(p)}}},[t._v("-")]),t._v(" "),r("span",{staticClass:"count"},[t._v(t._s(t.getProductCount(p.id)))]),t._v(" "),r("a",{staticClass:"plus grey",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addProduct(p)}}},[t._v("+")])]],2)]),t._v(" "),p.description?r("div",{staticClass:"product_description",on:{click:function(e){return t.openDetails(p)}}},[t._v("\n                    "+t._s(p.description)+"\n                  ")]):t._e()])])])})),0)])}))],2)}))],2),t._v(" "),r("ProductDetail",{ref:"productDetail"}),t._v(" "),r("AddressModal",{ref:"AddressModal"}),t._v(" "),r("ProductAdd",{ref:"ProductAdd"})],1)}),[],!1,null,"d27efd70",null);e.default=component.exports},316:function(t,e,r){"use strict";r(297)},317:function(t,e,r){"use strict";r(298)},335:function(t,e,r){},353:function(t,e,r){"use strict";r.r(e);r(13),r(4),r(20),r(14),r(21),r(22),r(23);var n=r(31),o=r(100),c=r(322);function d(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){d=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var v={components:{modal:n.default,AddressModal:o.default,ProductAdd:c.default},data:function(){return{count:null,price:0,product:{}}},mounted:function(){},methods:{show:function(t){var e=this;e.product={id:t.id,name:t.name,image:t.image,price:t.price},e.count=this.getProductCount(t.id),e.count=e.count?e.count:1,this.$refs.modal.show(),this.$axios.$get("/api/1.0.0/menu/product/"+t.id).then((function(t){e.product=t,e.price=e.product.price*e.count})).finally((function(){}))},closed:function(){this.product={}},removeProduct:function(){this.count=Math.max(0,--this.count),this.price=(this.count*this.product.price).toFixed(0)},addProduct:function(){this.count++,this.price=(this.count*this.product.price).toFixed(0)},getProductCount:function(t){var e,r=0,n=d(this.cartProducts);try{for(n.s();!(e=n.n()).done;){var p=e.value;p.id===t&&(r+=p.count)}}catch(t){n.e(t)}finally{n.f()}return r},save:function(){var t=this;this.addressSelected?this.$store.dispatch("cart/setProductCount",{product:this.product,count:this.count}).finally((function(){t.$refs.modal.close()})):(this.$refs.modal.close(),this.$refs.AddressModal.show())},openAddModal:function(){var p=this.product;this.$refs.modal.close(),this.$refs.ProductAdd.show(p)}},computed:{cartProducts:function(){return this.$store.getters["cart/products"]},addressSelected:function(){return!!this.$store.getters["cart/address"].value}}},f=(r(316),r(3)),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("modal",{ref:"modal",on:{close:t.closed}},[r("div",{staticClass:"modal_content"},[r("div",{staticClass:"modal_content_row"},[r("div",{staticClass:"image"},[r("img",{attrs:{src:t.product.image,alt:""}})]),t._v(" "),r("div",{staticClass:"content_right"},[r("div",{staticClass:"title"},[t._v(t._s(t.product.name))]),t._v(" "),r("div",{staticClass:"product_price"},[t._v(t._s(t.product.price)+" "),r("span",{staticClass:"ruble"},[t._v("₽")])]),t._v(" "),r("div",{staticClass:"description_title"},[t._v("Состав:")]),t._v(" "),r("div",{staticClass:"description"},[t._v(t._s(t.product.description))]),t._v(" "),r("div",{staticClass:"width_title"},[t._v("Вес и пищевая ценность")]),t._v(" "),r("div",{staticClass:"width_row"},[r("div",{staticClass:"width_row_left"},[t._v("Вес (г.)")]),t._v(" "),r("div",{staticClass:"width_row_right"},[t._v(t._s(t.product.width))])]),t._v(" "),r("div",{staticClass:"width_row"},[r("div",{staticClass:"width_row_left"},[t._v("Ккал")]),t._v(" "),r("div",{staticClass:"width_row_right"},[t._v(t._s(t.product.calories))])]),t._v(" "),r("div",{staticClass:"width_row"},[r("div",{staticClass:"width_row_left"},[t._v("Кдж")]),t._v(" "),r("div",{staticClass:"width_row_right"},[t._v(t._s(t.product.joule))])]),t._v(" "),r("div",{staticClass:"width_row"},[r("div",{staticClass:"width_row_left"},[t._v("Белки")]),t._v(" "),r("div",{staticClass:"width_row_right"},[t._v(t._s(t.product.proteins))])]),t._v(" "),r("div",{staticClass:"width_row"},[r("div",{staticClass:"width_row_left"},[t._v("Жиры")]),t._v(" "),r("div",{staticClass:"width_row_right"},[t._v(t._s(t.product.fat))])]),t._v(" "),r("div",{staticClass:"width_row"},[r("div",{staticClass:"width_row_left"},[t._v("Углеводы")]),t._v(" "),r("div",{staticClass:"width_row_right"},[t._v(t._s(t.product.carbohydrate))])])])]),t._v(" "),t.product.isComplex?r("div",{staticClass:"detail_cart"},[r("div",{staticClass:"detail_cart_add active",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.openAddModal()}}},[r("div",{staticClass:"detail_cart_add_btn_text"},[t._v("Добавить")])])]):r("div",{staticClass:"detail_cart"},[r("div",{staticClass:"detail_cart_controls"},[(t.count,[r("a",{staticClass:"minus",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeProduct()}}},[t._v("-")]),t._v(" "),r("span",{staticClass:"count"},[t._v(t._s(t.count))]),t._v(" "),r("a",{staticClass:"plus",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addProduct()}}},[t._v("+")])])],2),t._v(" "),r("div",{staticClass:"detail_cart_add",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.save()}}},[r("div",{staticClass:"detail_cart_add_btn_text"},[t._v("Сохранить")]),t._v(" "),t.count>0?[r("div",{staticClass:"detail_cart_add_btn_price"},[t._v(t._s(t.price)+" р.")])]:t._e()],2)])])]),t._v(" "),r("AddressModal",{ref:"AddressModal"}),t._v(" "),r("ProductAdd",{ref:"ProductAdd"})],1)}),[],!1,null,"4adea11d",null);e.default=component.exports},357:function(t,e,r){"use strict";r.r(e);var n=r(1),o=(r(9),{components:{},props:{conditions:{type:Object,default:function(){}}},data:function(){return{}},beforeMount:function(){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},mounted:function(){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},destroyed:function(){},updated:function(){},methods:{},computed:{},watch:{}}),c=(r(317),r(3)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"conditions"},[t.conditions.isAddressOk?[t.conditions.isDeliveryAvailable?[r("div",{staticClass:"head"},[t._v("Условия доставки")]),t._v(" "),r("div",{staticClass:"items"},[r("div",{staticClass:"item_column"},[r("div",{staticClass:"item sum"},[t._v("Минимальная сумма "+t._s(t.conditions.minSum)+" руб.")]),t._v(" "),r("div",{staticClass:"item location"},[t._v(t._s(t.conditions.workTime))])]),t._v(" "),r("div",{staticClass:"item_column"},[r("div",{staticClass:"item time"},[t._v("Среднее время доставки "+t._s(t.conditions.deliveryTime)+" мин")]),t._v(" "),t._m(0)])])]:[r("div",{staticClass:"head_error"},[t._v(" "+t._s(t.conditions.message)+" ")])]]:[r("div",{staticClass:"head_error"},[t._v("К сожалению, ваш адрес находиться вне зоны доставки, см.\n      "),r("nuxt-link",{attrs:{to:"/map"}},[t._v("зоны доставки")])],1)]],2)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item phone"},[t._v("Телефон для связи "),r("a",{attrs:{href:"tel:+74951501889"}},[t._v("+7 (495) 150 18 89")])])}],!1,null,"689cf1b0",null);e.default=component.exports},373:function(t,e,r){"use strict";r(335)}}]);